"0","# Extract split points from the model"
"0","splits <- xgb.model.dt.tree(model = mdl)  "
"0",""
"0","# Create bin boundaries including -Inf and Inf for complete coverage"
"0","cuts <- c(-Inf, unique(sort(splits$Split)), Inf)"
"0",""
"0","# Create and visualize the monotonic bins"
"0","data.frame(target = train$bad_flag,"
"0","           buckets = cut(train$inq_last_6mths, "
"0","                         breaks = cuts, "
"0","                         include.lowest = TRUE, "
"0","                         right = TRUE)) %>% "
"0","  group_by(buckets) %>%"
"0","  summarise(total = n(),  # Count observations in each bin"
"0","            events = sum(target == 1)) %>%  # Count defaults in each bin"
"0","  mutate(pct = events/total) %>%  # Calculate default rate"
"0","  ggplot(aes(x = buckets, y = pct)) + "
"0","  geom_col() + "
"0","  theme_minimal() + "
"0","  labs(x = ""Bins"", "
"0","       y = ""Default rate"","
"0","       title = ""Monotonic Bins for Inquiries"")"
