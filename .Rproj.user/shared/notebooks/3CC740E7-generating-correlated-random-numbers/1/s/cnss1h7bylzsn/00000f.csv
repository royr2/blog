"0","#| label: distribution-comparison"
"0",""
"0","# Different distributions cause problems"
"0","set.seed(123)"
"0","x1 <- rchisq(1000, df = 3)  # Chi-squared (skewed)"
"0","y1 <- rnorm(1000)           # Normal (symmetric)"
"0","old_mixed <- cbind(x1, y1)"
"0",""
"0","# Same distribution works better"
"0","x2 <- rchisq(1000, df = 3)"
"0","y2 <- rchisq(1000, df = 3)"
"0","old_same <- cbind(x2, y2)"
"0",""
"0","# Apply the same transformation to both"
"0","chol_mat <- chol(matrix(c(1, 0.7, 0.7, 1), ncol = 2))"
"0","new_mixed <- old_mixed %*% chol_mat"
"0","new_same <- old_same %*% chol_mat"
"0",""
"0","# Compare results"
"0","cat(""Target correlation: 0.7\n"")"
"1","Target correlation: 0.7
"
"0","cat(""Mixed distributions result:"", round(cor(new_mixed)[1,2], 3), ""\n"")"
"1","Mixed distributions result:"
"1"," "
"1","0.915"
"1"," "
"1","
"
"0","cat(""Same distribution result:"", round(cor(new_same)[1,2], 3))"
"1","Same distribution result:"
"1"," "
"1","0.699"
